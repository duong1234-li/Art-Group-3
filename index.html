<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spider Lily</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="scene">
        <svg viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <!-- Single Floret Definition -->
                <g id="floret">
                    <!-- Petal groups will be generated by JS -->
                </g>

                <!-- Base Petal Shapes -->
                <path id="petal-back" d="M0,0 C10,-30 35,-35 50,-20 C40,-12 20,-11 0,0" fill="#aa0000" opacity="0.9" />
                <path id="petal-main" d="M0,0 C10,-25 28,-35 45,-18 C35,-9 18,-9 0,0" fill="#cc0000" opacity="0.95" />
                <path id="petal-inner" d="M0,0 Q10,-20 20,-10 Q10,0 0,0" fill="#990000" opacity="0.8" />
                <path id="petal-extra-inner" d="M0,0 Q10,-15 15,-8 Q8,0 0,0" fill="#ff0000" opacity="0.7" />

                <!-- Proper Leaf Definition -->
                <g id="leaf">
                    <!-- Filled leaf shape -->
                    <path d="M0,0 Q15,-100 0,-250 Q-15,-100 0,0" fill="#1a3315" opacity="0.9" />
                    <!-- Central vein -->
                    <path d="M0,0 Q5,-100 0,-240" stroke="#2d5a27" stroke-width="1" fill="none" opacity="0.5" />
                </g>

                <!-- Glow Filter -->
                <filter id="bloom" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur" />
                    <feMerge>
                        <feMergeNode in="coloredBlur" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>


                <!-- Water Ripple Filter -->
                <filter id="water-ripple">
                    <feTurbulence type="turbulence" baseFrequency="0.01" numOctaves="2" result="turbulence" />
                    <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="20" xChannelSelector="R"
                        yChannelSelector="G" />
                </filter>
            </defs>

            <!-- Stars Layer (Background) -->
            <g id="stars"></g>

            <!-- Leaves Layer (Background) -->
            <g transform="translate(0, 800)">
                <!-- Leaves are now attached to flowers -->
                <g class="leaves"></g>
            </g>

            <!-- Flowers Layer -->
            <g id="flower-group" filter="url(#bloom)">
                <!-- Flower 1 (Center, High) -->
                <g transform="translate(400, 400) scale(1.2)">
                    <use href="#leaf" transform="translate(-8, 150) scale(0.4) rotate(-25)" />
                    <use href="#leaf" transform="translate(10, 200) scale(0.5) rotate(20)" />
                    <use href="#leaf" transform="translate(-5, 300) scale(0.4) rotate(-15)" />
                    <path d="M0,0 C30,100 -30,300 0,400" stroke="#2d5a27" stroke-width="6" fill="none" />
                    <g class="procedural-flower"></g>
                </g>
                <!-- Flower 2 (Left, Low) -->
                <g transform="translate(200, 550) scale(1.0)">
                    <use href="#leaf" transform="translate(10, 180) scale(0.4) rotate(20)" />
                    <use href="#leaf" transform="translate(-15, 250) scale(0.45) rotate(-25)" />
                    <path d="M0,0 Q-40,200 0,400" stroke="#2d5a27" stroke-width="6" fill="none" />
                    <g class="procedural-flower"></g>
                </g>
                <!-- Flower 3 (Right, Mid) -->
                <g transform="translate(600, 480) scale(1.1)">
                    <use href="#leaf" transform="translate(-12, 160) scale(0.45) rotate(-20)" />
                    <use href="#leaf" transform="translate(10, 220) scale(0.5) rotate(15)" />
                    <use href="#leaf" transform="translate(5, 320) scale(0.4) rotate(5)" />
                    <path d="M0,0 Q40,200 0,400" stroke="#2d5a27" stroke-width="6" fill="none" />
                    <g class="procedural-flower"></g>
                </g>
            </g>

            <!-- Floating Particles (Animated) -->
            <g id="floating-particles" fill="#ff3333" opacity="0.6"></g>
            <!-- Snow Particles -->
            <g id="snow" fill="#ffffff" opacity="0.8" style="display: none;"></g>
            <!-- Rain Particles -->
            <g id="rain" stroke="#aaddff" stroke-width="1" opacity="0.6" style="display: none;"></g>

            <!-- Bubbles -->
            <g id="bubbles" fill="#ffffff" opacity="0.6" style="display: none;"></g>
        </svg>
        <button id="snow-toggle">Enable Snow</button>
        <button id="rain-toggle">Enable Rain</button>
        <button id="water-toggle">Enable Ocean</button>
        <button id="wind-toggle">Enable Wind</button>
        <button id="color-toggle">Change Color</button>
    </div>
    <div class="slider-controls">
        <div class="slider-container" id="snow-slider-container" style="display: none;">
            <label for="snow-rate">Snow</label>
            <input type="range" id="snow-rate" min="0" max="200" value="50">
        </div>
        <div class="slider-container" id="rain-slider-container" style="display: none;">
            <label for="rain-rate">Rain</label>
            <input type="range" id="rain-rate" min="0" max="250" value="100">
        </div>
    </div>
    <script src="script.js" defer></script>
</body>

</html>